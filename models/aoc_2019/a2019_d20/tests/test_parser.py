from models.common.io import InputFromString

from ..parser import parse_portal_maze, parse_recursive_donut_maze


def test_parse_portal_maze():
    file_content = """
                           A           
                           A           
                    #######.#########  
                    #######.........#  
                    #######.#######.#  
                    #######.#######.#  
                    #######.#######.#  
                    #####  B    ###.#  
                  BC...##  C    ###.#  
                    ##.##       ###.#  
                    ##...DE  F  ###.#  
                    #####    G  ###.#  
                    #########.#####.#  
                  DE..#######...###.#  
                    #.#########.###.#  
                  FG..#########.....#  
                    ###########.#####  
                               Z       
                               Z       
                   """
    maze = parse_portal_maze(InputFromString(file_content))
    assert maze.num_steps_to_solve() == 23


def test_parse_recursive_donut_maze():
    file_content = """
                       Z L X W       C                 
                       Z P Q B       K                 
            ###########.#.#.#.#######.###############  
            #...#.......#.#.......#.#.......#.#.#...#  
            ###.#.#.#.#.#.#.#.###.#.#.#######.#.#.###  
            #.#...#.#.#...#.#.#...#...#...#.#.......#  
            #.###.#######.###.###.#.###.###.#.#######  
            #...#.......#.#...#...#.............#...#  
            #.#########.#######.#.#######.#######.###  
            #...#.#    F       R I       Z    #.#.#.#  
            #.###.#    D       E C       H    #.#.#.#  
            #.#...#                           #...#.#  
            #.###.#                           #.###.#  
            #.#....OA                       WB..#.#..ZH
            #.###.#                           #.#.#.#  
          CJ......#                           #.....#  
            #######                           #######  
            #.#....CK                         #......IC
            #.###.#                           #.###.#  
            #.....#                           #...#.#  
            ###.###                           #.#.#.#  
          XF....#.#                         RF..#.#.#  
            #####.#                           #######  
            #......CJ                       NM..#...#  
            ###.#.#                           #.###.#  
          RE....#.#                           #......RF
            ###.###        X   X       L      #.#.#.#  
            #.....#        F   Q       P      #.#.#.#  
            ###.###########.###.#######.#########.###  
            #.....#...#.....#.......#...#.....#.#...#  
            #####.#.###.#######.#######.###.###.#.#.#  
            #.......#.......#.#.#.#.#...#...#...#.#.#  
            #####.###.#####.#.#.#.#.###.###.#.###.###  
            #.......#.....#.#...#...............#...#  
            #############.#.#.###.###################  
                         A O F   N                     
                         A A D   M                        
    """
    maze = parse_recursive_donut_maze(InputFromString(file_content))
    assert maze.num_steps_to_solve() == 396
